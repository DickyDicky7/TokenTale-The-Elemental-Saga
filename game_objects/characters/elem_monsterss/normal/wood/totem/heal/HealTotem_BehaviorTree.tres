[gd_resource type="BehaviorTree" load_steps=35 format=3 uid="uid://qjvfmmgwhd5t"]

[ext_resource type="BlackboardPlan" uid="uid://c72xpnxtx075g" path="res://game_objects/characters/elem_monsterss/normal/wood/totem/heal/HealTotem_BlackboardPlan----.tres" id="1_rryj2"]
[ext_resource type="Script" path="res://ai/tasks/beingHit.gd" id="2_5hjei"]
[ext_resource type="BBNode" uid="uid://b1o86uwpvkhev" path="res://game_objects/characters/elem_monsterss/normal/wood/totem/heal/HealTotem_BBNode_AnimationPlayer.tres" id="3_htl4n"]
[ext_resource type="Script" path="res://ai/tasks/depleteHealth.gd" id="4_gwtra"]
[ext_resource type="Script" path="res://ai/tasks/detectCharacter2.gd" id="5_wwoot"]
[ext_resource type="Script" path="res://ai/tasks/changeClockwisePriority.gd" id="6_cq7ag"]
[ext_resource type="Script" path="res://ai/tasks/teleporterMoveSetup.gd" id="7_upcit"]
[ext_resource type="Script" path="res://ai/tasks/teleport.gd" id="9_eruc1"]
[ext_resource type="Script" path="res://ai/tasks/attack.gd" id="10_16p5e"]

[sub_resource type="BTAction" id="BTAction_qwhvw"]
script = ExtResource("2_5hjei")
PathHurtBox3D = NodePath("HurtBox3D")

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_47yv1"]
await_completion = 1.0
animation_player = ExtResource("3_htl4n")
animation_name = &"HURT"

[sub_resource type="BTWait" id="BTWait_0i10f"]

[sub_resource type="BTSequence" id="BTSequence_e13gf"]
custom_name = "TakeDamage"
children = [SubResource("BTAction_qwhvw"), SubResource("BTPlayAnimation_47yv1"), SubResource("BTWait_0i10f")]

[sub_resource type="BTAction" id="BTAction_tuajh"]
script = ExtResource("4_gwtra")

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_7c5rn"]
await_completion = 1.0
animation_player = ExtResource("3_htl4n")
animation_name = &"DEAD"

[sub_resource type="BTSequence" id="BTSequence_hhbtf"]
custom_name = "Dead"
children = [SubResource("BTAction_tuajh"), SubResource("BTPlayAnimation_7c5rn")]

[sub_resource type="BTAction" id="BTAction_olha0"]
script = ExtResource("5_wwoot")
TargetCharacter3DName = &"MainCharacter"
PathShapeCast3D = NodePath("ShapeCast3D")

[sub_resource type="BTAction" id="BTAction_h32k0"]
script = ExtResource("6_cq7ag")

[sub_resource type="BTCooldown" id="BTCooldown_n0nor"]
duration = 4.0
children = [SubResource("BTAction_h32k0")]

[sub_resource type="BTInvert" id="BTInvert_73pfk"]
custom_name = "NotChangeClockwisePriority"
children = [SubResource("BTCooldown_n0nor")]

[sub_resource type="BTAction" id="BTAction_q34g6"]
script = ExtResource("7_upcit")
Type = &"TELEPORT2"
ActionDistance = 0.3
PathRayCast3DMove = NodePath("")
PathRayCast3DTeleport = NodePath("RayCast3DTeleport")

[sub_resource type="BBNode" id="BBNode_atae4"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_xtryw"]
animation_player = SubResource("BBNode_atae4")
animation_name = &"EMERGE"
from_end = true

[sub_resource type="BTAction" id="BTAction_3po85"]
script = ExtResource("9_eruc1")
PathFlipSprite3D = NodePath("")

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_lekkn"]
animation_player = ExtResource("3_htl4n")
animation_name = &"EMERGE"

[sub_resource type="BTParallel" id="BTParallel_3of70"]
num_successes_required = 2
children = [SubResource("BTPlayAnimation_xtryw"), SubResource("BTAction_3po85"), SubResource("BTPlayAnimation_lekkn")]

[sub_resource type="BTSequence" id="BTSequence_krwlp"]
custom_name = "Move"
children = [SubResource("BTAction_q34g6"), SubResource("BTParallel_3of70")]

[sub_resource type="BTInvert" id="BTInvert_c3dxb"]
custom_name = "NotMove"
children = [SubResource("BTSequence_krwlp")]

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_mu1yu"]
animation_player = ExtResource("3_htl4n")
animation_name = &"ATTACK"

[sub_resource type="BTAction" id="BTAction_8xhkf"]
script = ExtResource("10_16p5e")

[sub_resource type="BTSequence" id="BTSequence_pjhan"]
custom_name = "Attack"
children = [SubResource("BTPlayAnimation_mu1yu"), SubResource("BTAction_8xhkf")]

[sub_resource type="BTSequence" id="BTSequence_b5lm3"]
custom_name = "Act"
children = [SubResource("BTAction_olha0"), SubResource("BTInvert_73pfk"), SubResource("BTInvert_c3dxb"), SubResource("BTSequence_pjhan")]

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_qhhmi"]
animation_player = ExtResource("3_htl4n")
animation_name = &"IDLE"

[sub_resource type="BTSelector" id="BTSelector_p337a"]
custom_name = "Root"
children = [SubResource("BTSequence_e13gf"), SubResource("BTSequence_hhbtf"), SubResource("BTSequence_b5lm3"), SubResource("BTPlayAnimation_qhhmi")]

[resource]
blackboard_plan = ExtResource("1_rryj2")
root_task = SubResource("BTSelector_p337a")

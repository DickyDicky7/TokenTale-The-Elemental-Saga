[gd_resource type="BehaviorTree" load_steps=62 format=3 uid="uid://diju3wt86axt4"]

[ext_resource type="Script" path="res://ai/tasks/beingHit.gd" id="1_2ls6r"]
[ext_resource type="BlackboardPlan" uid="uid://ckrgsqjrqaovs" path="res://game_objects/characters/elem_monsterss/normal/fire/imp/Imp_BlackboardPlan----.tres" id="1_3sooa"]
[ext_resource type="Script" path="res://ai/tasks/depleteHealth.gd" id="1_ecjrg"]
[ext_resource type="Script" path="res://ai/tasks/detectCharacter.gd" id="1_orrkx"]
[ext_resource type="Script" path="res://ai/tasks/watchingAround.gd" id="2_4diqm"]
[ext_resource type="Script" path="res://ai/tasks/changeSeeingDirection.gd" id="3_ikkf0"]
[ext_resource type="Script" path="res://ai/tasks/changeClockwisePriority.gd" id="6_a0ehf"]
[ext_resource type="Script" path="res://ai/tasks/distancerMoveSetup.gd" id="7_d3hbx"]
[ext_resource type="Script" path="res://ai/tasks/move.gd" id="7_mmqsn"]
[ext_resource type="Script" path="res://ai/tasks/throw.gd" id="11_0yfhh"]

[sub_resource type="BTAction" id="BTAction_6t6tx"]
script = ExtResource("1_2ls6r")
PathHurtBox3D = NodePath("HurtBox3D")

[sub_resource type="BBNode" id="BBNode_ya38e"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_lepmk"]
await_completion = 1.0
animation_player = SubResource("BBNode_ya38e")
animation_name = &"HURT"

[sub_resource type="BTSequence" id="BTSequence_0gie0"]
custom_name = "TakeDamage"
children = [SubResource("BTAction_6t6tx"), SubResource("BTPlayAnimation_lepmk")]

[sub_resource type="BTAction" id="BTAction_psoou"]
script = ExtResource("1_ecjrg")

[sub_resource type="BBNode" id="BBNode_vlnfr"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_chl86"]
await_completion = 1.0
animation_player = SubResource("BBNode_vlnfr")
animation_name = &"DEAD"

[sub_resource type="BTSequence" id="BTSequence_t4upe"]
custom_name = "Dead"
children = [SubResource("BTAction_psoou"), SubResource("BTPlayAnimation_chl86")]

[sub_resource type="BTAction" id="BTAction_ld61t"]
script = ExtResource("1_orrkx")
TargetCharacter3DName = &"MainCharacter"
PathShapeCast3D = NodePath("ShapeCast3D")
PathRayCast3D = NodePath("Ray__Cast3D")
PathEyeSight = NodePath("EyeSight$3D")

[sub_resource type="BTInvert" id="BTInvert_ftoha"]
custom_name = "NotDectectCharacter"
children = [SubResource("BTAction_ld61t")]

[sub_resource type="BTAction" id="BTAction_l7qik"]
script = ExtResource("2_4diqm")

[sub_resource type="BTCooldown" id="BTCooldown_c5bi8"]
duration = 2.0
children = [SubResource("BTAction_l7qik")]

[sub_resource type="BTAction" id="BTAction_3826e"]
script = ExtResource("3_ikkf0")
PathAnimatedSprite3D = NodePath("AnimatedSprite3D_$Main$")
PathEyeSight = NodePath("EyeSight$3D")

[sub_resource type="BBNode" id="BBNode_ex4qd"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_xvwmb"]
animation_player = SubResource("BBNode_ex4qd")
animation_name = &"IDLE"

[sub_resource type="BTSequence" id="BTSequence_lja8q"]
custom_name = "Patroll"
children = [SubResource("BTInvert_ftoha"), SubResource("BTCooldown_c5bi8"), SubResource("BTAction_3826e"), SubResource("BTPlayAnimation_xvwmb")]

[sub_resource type="BTAction" id="BTAction_6k7j4"]
script = ExtResource("1_orrkx")
TargetCharacter3DName = &"MainCharacter"
PathShapeCast3D = NodePath("ShapeCast3D")
PathRayCast3D = NodePath("Ray__Cast3D")
PathEyeSight = NodePath("EyeSight$3D")

[sub_resource type="BTAction" id="BTAction_e8cf4"]
script = ExtResource("3_ikkf0")
PathAnimatedSprite3D = NodePath("AnimatedSprite3D_$Main$")
PathEyeSight = NodePath("EyeSight$3D")

[sub_resource type="BTAction" id="BTAction_0naci"]
script = ExtResource("7_d3hbx")
Type = "FALLBACK"
FallBackDistance = 0.75
ChaseDistance = 1.25
PathRayCast3DCheck = NodePath("RayCast3DMove")

[sub_resource type="BTAction" id="BTAction_t8vs4"]
script = ExtResource("7_mmqsn")
PathAnimatedSprite3D = NodePath("AnimatedSprite3D_$Main$")

[sub_resource type="BBNode" id="BBNode_lor2a"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_o5qhv"]
animation_player = SubResource("BBNode_lor2a")
animation_name = &"MOVE"

[sub_resource type="BTParallel" id="BTParallel_lrvks"]
num_successes_required = 2
children = [SubResource("BTAction_t8vs4"), SubResource("BTPlayAnimation_o5qhv")]

[sub_resource type="BTSequence" id="BTSequence_1fvwl"]
custom_name = "FallBackAction"
children = [SubResource("BTAction_0naci"), SubResource("BTParallel_lrvks")]

[sub_resource type="BTAction" id="BTAction_vsatl"]
script = ExtResource("7_d3hbx")
Type = "CHASE"
FallBackDistance = 0.75
ChaseDistance = 1.25
PathRayCast3DCheck = NodePath("RayCast3DMove")

[sub_resource type="BTAction" id="BTAction_f5jhs"]
script = ExtResource("7_mmqsn")
PathAnimatedSprite3D = NodePath("AnimatedSprite3D_$Main$")

[sub_resource type="BBNode" id="BBNode_qv2bf"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_e2hfa"]
animation_player = SubResource("BBNode_qv2bf")
animation_name = &"MOVE"

[sub_resource type="BTParallel" id="BTParallel_2sj1m"]
num_successes_required = 2
children = [SubResource("BTAction_f5jhs"), SubResource("BTPlayAnimation_e2hfa")]

[sub_resource type="BTSequence" id="BTSequence_mq525"]
custom_name = "ChaseAction"
children = [SubResource("BTAction_vsatl"), SubResource("BTParallel_2sj1m")]

[sub_resource type="BTAction" id="BTAction_0xn40"]
script = ExtResource("6_a0ehf")

[sub_resource type="BTCooldown" id="BTCooldown_5ai8q"]
duration = 6.0
children = [SubResource("BTAction_0xn40")]

[sub_resource type="BTInvert" id="BTInvert_k21na"]
custom_name = "NotChangeClockwisePriority"
children = [SubResource("BTCooldown_5ai8q")]

[sub_resource type="BTAction" id="BTAction_2bq1b"]
script = ExtResource("7_d3hbx")
Type = "PROBE"
FallBackDistance = 0.75
ChaseDistance = 1.25
PathRayCast3DCheck = NodePath("RayCast3DMove")

[sub_resource type="BTAction" id="BTAction_ol2xe"]
script = ExtResource("7_mmqsn")
PathAnimatedSprite3D = NodePath("AnimatedSprite3D_$Main$")

[sub_resource type="BBNode" id="BBNode_vk6ww"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_2d400"]
animation_player = SubResource("BBNode_vk6ww")
animation_name = &"MOVE"

[sub_resource type="BTParallel" id="BTParallel_w345p"]
num_successes_required = 2
children = [SubResource("BTAction_ol2xe"), SubResource("BTPlayAnimation_2d400")]

[sub_resource type="BTSequence" id="BTSequence_3egs5"]
custom_name = "ProbeAction"
children = [SubResource("BTInvert_k21na"), SubResource("BTAction_2bq1b"), SubResource("BTParallel_w345p")]

[sub_resource type="BTCooldown" id="BTCooldown_21b1k"]
duration = 1.5
children = [SubResource("BTSequence_3egs5")]

[sub_resource type="BTSelector" id="BTSelector_2rqvj"]
custom_name = "Move"
children = [SubResource("BTSequence_1fvwl"), SubResource("BTSequence_mq525"), SubResource("BTCooldown_21b1k")]

[sub_resource type="BTInvert" id="BTInvert_j64lu"]
custom_name = "NotMove"
children = [SubResource("BTSelector_2rqvj")]

[sub_resource type="BBNode" id="BBNode_q4hpc"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_fm1dm"]
await_completion = 1.0
animation_player = SubResource("BBNode_q4hpc")
animation_name = &"THROW"

[sub_resource type="BTAction" id="BTAction_7m05e"]
script = ExtResource("11_0yfhh")

[sub_resource type="BTSequence" id="BTSequence_n34ne"]
custom_name = "Attack"
children = [SubResource("BTPlayAnimation_fm1dm"), SubResource("BTAction_7m05e")]

[sub_resource type="BTCooldown" id="BTCooldown_bhisv"]
duration = 3.0
children = [SubResource("BTSequence_n34ne")]

[sub_resource type="BTSequence" id="BTSequence_aebub"]
custom_name = "Act"
children = [SubResource("BTAction_6k7j4"), SubResource("BTAction_e8cf4"), SubResource("BTInvert_j64lu"), SubResource("BTCooldown_bhisv")]

[sub_resource type="BBNode" id="BBNode_yb4p3"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_goqlh"]
animation_player = SubResource("BBNode_yb4p3")
animation_name = &"IDLE"

[sub_resource type="BTSelector" id="BTSelector_lfg3o"]
custom_name = "Root"
children = [SubResource("BTSequence_0gie0"), SubResource("BTSequence_t4upe"), SubResource("BTSequence_lja8q"), SubResource("BTSequence_aebub"), SubResource("BTPlayAnimation_goqlh")]

[resource]
blackboard_plan = ExtResource("1_3sooa")
root_task = SubResource("BTSelector_lfg3o")

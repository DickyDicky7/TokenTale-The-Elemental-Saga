[gd_resource type="BehaviorTree" load_steps=58 format=3 uid="uid://diju3wt86axt4"]

[ext_resource type="Script" path="res://ai/tasks/beingHit.gd" id="1_2ls6r"]
[ext_resource type="BlackboardPlan" uid="uid://ckrgsqjrqaovs" path="res://game_objects/characters/elem_monsterss/normal/fire/imp/Imp_BlackboardPlan----.tres" id="1_3sooa"]
[ext_resource type="Script" path="res://ai/tasks/depleteHealth.gd" id="1_ecjrg"]
[ext_resource type="Script" path="res://ai/tasks/detectCharacter.gd" id="1_orrkx"]
[ext_resource type="Script" path="res://ai/tasks/watchingAround.gd" id="2_4diqm"]
[ext_resource type="BBNode" uid="uid://836uj4l1m448" path="res://game_objects/characters/elem_monsterss/normal/fire/imp/Imp_BBNode_AnimationPlayer.tres" id="3_c60kv"]
[ext_resource type="Script" path="res://ai/tasks/changeSeeingDirection.gd" id="3_ikkf0"]
[ext_resource type="Script" path="res://ai/tasks/reload.gd" id="7_3tkrk"]
[ext_resource type="Script" path="res://ai/tasks/changeClockwisePriority.gd" id="7_ntvm3"]
[ext_resource type="Script" path="res://ai/tasks/distancerMoveSetup.gd" id="7_r0fwc"]
[ext_resource type="Script" path="res://ai/tasks/move.gd" id="8_lw88l"]
[ext_resource type="Script" path="res://ai/tasks/attack.gd" id="12_iawuu"]

[sub_resource type="BTAction" id="BTAction_6t6tx"]
script = ExtResource("1_2ls6r")
PathHurtbox3D = NodePath("Hurtbox3D")

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_lepmk"]
await_completion = 10.0
animation_player = ExtResource("3_c60kv")
animation_name = &"HURT"

[sub_resource type="BTSequence" id="BTSequence_0gie0"]
custom_name = "TakeDamage"
children = [SubResource("BTAction_6t6tx"), SubResource("BTPlayAnimation_lepmk")]

[sub_resource type="BTAction" id="BTAction_psoou"]
script = ExtResource("1_ecjrg")

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_chl86"]
await_completion = 10.0
animation_player = ExtResource("3_c60kv")
animation_name = &"DEAD"

[sub_resource type="BTSequence" id="BTSequence_t4upe"]
custom_name = "Dead"
children = [SubResource("BTAction_psoou"), SubResource("BTPlayAnimation_chl86")]

[sub_resource type="BTAction" id="BTAction_ld61t"]
script = ExtResource("1_orrkx")
TargetCharacter3DName = &"MainCharacter"
PathShapeCast3D = NodePath("ShapeCast3D")
PathRayCast3D = NodePath("Ray__Cast3D")
PathEyeSight = NodePath("EyeSight$3D")

[sub_resource type="BTInvert" id="BTInvert_ftoha"]
custom_name = "NotDectectCharacter"
children = [SubResource("BTAction_ld61t")]

[sub_resource type="BTAction" id="BTAction_l7qik"]
script = ExtResource("2_4diqm")

[sub_resource type="BTCooldown" id="BTCooldown_c5bi8"]
duration = 2.0
children = [SubResource("BTAction_l7qik")]

[sub_resource type="BTAction" id="BTAction_3826e"]
script = ExtResource("3_ikkf0")
PathFlipSprite3D = NodePath("Flippable3DSpriteBase3DConsolidation")
PathEyeSight = NodePath("EyeSight$3D")

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_xvwmb"]
animation_player = ExtResource("3_c60kv")
animation_name = &"IDLE"

[sub_resource type="BTSequence" id="BTSequence_lja8q"]
custom_name = "Patroll"
children = [SubResource("BTInvert_ftoha"), SubResource("BTCooldown_c5bi8"), SubResource("BTAction_3826e"), SubResource("BTPlayAnimation_xvwmb")]

[sub_resource type="BTAction" id="BTAction_6k7j4"]
script = ExtResource("1_orrkx")
TargetCharacter3DName = &"MainCharacter"
PathShapeCast3D = NodePath("ShapeCast3D")
PathRayCast3D = NodePath("Ray__Cast3D")
PathEyeSight = NodePath("EyeSight$3D")

[sub_resource type="BTAction" id="BTAction_e8cf4"]
script = ExtResource("3_ikkf0")
PathFlipSprite3D = NodePath("Flippable3DSpriteBase3DConsolidation")
PathEyeSight = NodePath("EyeSight$3D")

[sub_resource type="BTAction" id="BTAction_tf2ka"]
script = ExtResource("7_3tkrk")
PathTimer = NodePath("Timer")

[sub_resource type="BTAction" id="BTAction_d6sfd"]
script = ExtResource("7_ntvm3")

[sub_resource type="BTCooldown" id="BTCooldown_ividf"]
duration = 6.0
children = [SubResource("BTAction_d6sfd")]

[sub_resource type="BTInvert" id="BTInvert_jalgn"]
custom_name = "NotChangeClockwisePriority"
children = [SubResource("BTCooldown_ividf")]

[sub_resource type="BTAction" id="BTAction_fp7gd"]
script = ExtResource("7_r0fwc")
Type = "FALLBACK"
FallBackDistance = 0.75
ChaseDistance = 1.25
PathRayCast3DCheck = NodePath("RayCast3DMove")

[sub_resource type="BTAction" id="BTAction_wemvr"]
script = ExtResource("8_lw88l")
PathFlipSprite3D = NodePath("Flippable3DSpriteBase3DConsolidation")

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_b7ut1"]
animation_player = ExtResource("3_c60kv")
animation_name = &"MOVE"

[sub_resource type="BTParallel" id="BTParallel_hssgu"]
num_successes_required = 2
children = [SubResource("BTAction_wemvr"), SubResource("BTPlayAnimation_b7ut1")]

[sub_resource type="BTSequence" id="BTSequence_b5o86"]
custom_name = "FallBack"
children = [SubResource("BTAction_fp7gd"), SubResource("BTParallel_hssgu")]

[sub_resource type="BTAction" id="BTAction_reh3p"]
script = ExtResource("7_r0fwc")
Type = "CHASE"
FallBackDistance = 0.75
ChaseDistance = 1.25
PathRayCast3DCheck = NodePath("RayCast3DMove")

[sub_resource type="BTAction" id="BTAction_o856m"]
script = ExtResource("8_lw88l")
PathFlipSprite3D = NodePath("Flippable3DSpriteBase3DConsolidation")

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_7v83x"]
animation_player = ExtResource("3_c60kv")
animation_name = &"MOVE"

[sub_resource type="BTParallel" id="BTParallel_nqtr8"]
num_successes_required = 2
children = [SubResource("BTAction_o856m"), SubResource("BTPlayAnimation_7v83x")]

[sub_resource type="BTSequence" id="BTSequence_t4p7o"]
custom_name = "Chase"
children = [SubResource("BTAction_reh3p"), SubResource("BTParallel_nqtr8")]

[sub_resource type="BTAction" id="BTAction_uusfl"]
script = ExtResource("7_r0fwc")
Type = "PROBE"
FallBackDistance = 0.75
ChaseDistance = 1.25
PathRayCast3DCheck = NodePath("RayCast3DMove")

[sub_resource type="BTAction" id="BTAction_vs130"]
script = ExtResource("8_lw88l")
PathFlipSprite3D = NodePath("Flippable3DSpriteBase3DConsolidation")

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_xjo03"]
animation_player = ExtResource("3_c60kv")
animation_name = &"MOVE"

[sub_resource type="BTParallel" id="BTParallel_a5r58"]
num_successes_required = 2
children = [SubResource("BTAction_vs130"), SubResource("BTPlayAnimation_xjo03")]

[sub_resource type="BTSequence" id="BTSequence_8ag2q"]
custom_name = "Probe"
children = [SubResource("BTAction_uusfl"), SubResource("BTParallel_a5r58")]

[sub_resource type="BTCooldown" id="BTCooldown_15i2q"]
duration = 2.0
children = [SubResource("BTSequence_8ag2q")]

[sub_resource type="BTSelector" id="BTSelector_kalqe"]
custom_name = "Move"
children = [SubResource("BTSequence_b5o86"), SubResource("BTSequence_t4p7o"), SubResource("BTCooldown_15i2q")]

[sub_resource type="BTInvert" id="BTInvert_4sy8g"]
custom_name = "NotMove"
children = [SubResource("BTSelector_kalqe")]

[sub_resource type="BBVariant" id="BBVariant_ubr2k"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_4xhpq"]
variable = &"ReadyToStrike"
value = SubResource("BBVariant_ubr2k")

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_wkx37"]
await_completion = 10.0
animation_player = ExtResource("3_c60kv")
animation_name = &"THROW"

[sub_resource type="BTAction" id="BTAction_mwmcc"]
script = ExtResource("12_iawuu")

[sub_resource type="BTSequence" id="BTSequence_01l0a"]
custom_name = "Attack"
children = [SubResource("BTCheckVar_4xhpq"), SubResource("BTPlayAnimation_wkx37"), SubResource("BTAction_mwmcc")]

[sub_resource type="BTSequence" id="BTSequence_aebub"]
custom_name = "Act"
children = [SubResource("BTAction_6k7j4"), SubResource("BTAction_e8cf4"), SubResource("BTAction_tf2ka"), SubResource("BTInvert_jalgn"), SubResource("BTInvert_4sy8g"), SubResource("BTSequence_01l0a")]

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_goqlh"]
animation_player = ExtResource("3_c60kv")
animation_name = &"IDLE"

[sub_resource type="BTSelector" id="BTSelector_lfg3o"]
custom_name = "Root"
children = [SubResource("BTSequence_0gie0"), SubResource("BTSequence_t4upe"), SubResource("BTSequence_lja8q"), SubResource("BTSequence_aebub"), SubResource("BTPlayAnimation_goqlh")]

[resource]
blackboard_plan = ExtResource("1_3sooa")
root_task = SubResource("BTSelector_lfg3o")
